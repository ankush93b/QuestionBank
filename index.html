<!DOCTYPE html>
<html lang="en">
<head>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-922KV2R360"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-922KV2R360');
</script>

  <meta charset="UTF-8">
  <title>Question Bank - Best website for Multiple Choice Questions MCQs for all competative exams</title>
  <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Question Bank" />
  <meta property="og:description" content="Learn in MCQ way - A vast collection of MCQs on various topics." />
  <meta property="og:image" content="https://sawalbank.com/images/logo.png" />
  <meta property="og:url" content="https://sawalbank.com/" />
  <meta property="og:type" content="website" />
  <style>
    body {
      font-family: 'Inter', Arial, sans-serif;
      margin: 0;
      text-align: center;
      background-color: #f9f9f9;
    }
    .banner {
      padding: 20px;
      font-size: 24px;
      position: relative;
    }
    .bannerimg {
      margin-top: 60px;
      -webkit-user-drag: none;
    }
    .bannerimg img {
      width: 450px;
    }
    .user-info {
      position: absolute;
      top: 10px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }
    .user-info img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid black;
      cursor: pointer;
    }
    .container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin-top: 40px;
      gap: 24px;
    }
    .dropdown-row {
      display: flex;
      flex-direction: row;
      gap: 20px;
      justify-content: center;
      align-items: center;
      margin-bottom: 0;
    }
    #sign-in-btn {
      color: white;
      background-color: black;
      border: none;
      border-radius: 30px;
      padding: 11px 12px;
      font-size: 13px;
      font-weight: 100;
      letter-spacing: 0.05em;
      box-shadow: 0 2px 12px rgba(46,125,255,0.11);
      transition: background 0.2s, transform 0.13s, box-shadow 0.15s;
      margin-top: 15px;
      width: auto;
      outline: none;
    }
    #sign-in-btn:hover, #sign-in-btn:focus {
      box-shadow: 0 4px 18px rgba(46,125,255,0.17);
    }
    .dropdown {
      position: relative;
      width: 350px;
    }
    .dropdown.disabled {
      opacity: 0.5;
      pointer-events: none;
    }
    .dropdown-label {
      font-weight: bold;
      margin-bottom: 8px;
      display: block;
    }
    .dropdown-toggle {
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 25px;
      padding: 10px;
      cursor: pointer;
      text-align: left;
      position: relative;
    }
    .dropdown-toggle::after {
      content: "▼";
      position: absolute;
      right: 12px;
      top: 12px;
      font-size: 12px;
    }
    .dropdown-menu {
      display: none;
      position: absolute;
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 25px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 100%;
      top: 75px;
      z-index: 1;
      max-height: 200px;
      overflow: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .dropdown-menu::-webkit-scrollbar {
      display: none;
    }
    .dropdown-menu div {
      padding: 10px;
      cursor: pointer;
      margin: 6px;
    }
    .dropdown-menu div:hover {
      background-color: #f0f0f0;
      margin: 6px;
      border-radius: 25px;
      font-size: 18px;
      font-weight: bold;
    }
    button {
      padding: 12px 20px;
      width: 75px;
      margin-top: 23px;
      border-radius: 25px;
      background-color: #4CAF50;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }

    /* Auth Modal Styles - MODERNIZED */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.3);
    }
    .modal-content {
      background: #fff;
      margin: 80px auto;
      padding: 32px 28px 18px 28px;
      border-radius: 18px;
      width: 350px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.18);
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 16px;
      position: relative;
      animation: fadeInUp 0.4s cubic-bezier(.55,1.3,.5,1) both;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(50px);}
      to { opacity: 1; transform: translateY(0);}
    }

    .modal-content h3 {
      margin: 0 0 12px 0;
      font-size: 1.5rem;
      font-weight: 700;
      text-align: center;
      color: #23272f;
    }
    .auth-input-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 6px;
      margin-right: 20px;
    }
    .modal-content input {
      width: 100%;
      background: #f8fafc;
      border: 1px solid #d0d7de;
      border-radius: 9px;
      padding: 10px 12px;
      font-size: 16px;
      transition: border-color 0.2s;
      margin-bottom: 0;
      outline: none;
    }
    .modal-content input:focus {
      border-color: #4CAF50;
      background: #f0f7f0;
    }
    .auth-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      width: 100%;
      margin: 0 0 4px 0;
    }
    .auth-actions button {
      width: 48%;
      margin: 0;
      font-size: 15px;
      border-radius: 12px;
      padding: 10px 0;
      font-weight: 600;
      transition: background 0.17s;
    }
    .auth-actions button:last-child {
      background: red;
      color: white;
      border: 1px solid red;
      font-weight: 400;
    }
    .modal-content .auth-divider {
      margin: 8px 0 0 0;
      text-align: center;
      color: #aaa;
      font-size: 13px;
      letter-spacing: 0.06em;
    }
    .modal-content .auth-google {
      width: 100%;
      padding: 10px 0;
      margin: 0 0 2px 0;
      border-radius: 12px;
      border: 1px solid #d0d7de;
      background: #fff;
      color: #23272f;
      font-size: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      cursor: pointer;
      transition: background 0.15s;
    }
    .modal-content .auth-google:hover {
      background: #f8fafc;
    }
    .modal-content .auth-google img {
      width: 20px;
      height: 20px;
      vertical-align: middle;
    }
    .modal-content .auth-link {
      font-size: 13px;
      color: #4CAF50;
      text-decoration: none;
      text-align: center;
      cursor: pointer;
      display: block;
      margin-top: 2px;
      transition: color 0.14s;
    }
    .modal-content .auth-link:hover {
      color: #2e7d32;
      text-decoration: underline;
    }
    .modal-content .auth-error {
      color: #e74c3c;
      margin: 6px 0 0 0;
      min-height: 20px;
      font-size: 14px;
      text-align: center;
    }
    /* Added style for forgot password link */
    .modal-content .forgot-link {
      font-size: 13px;
      color: #1976d2;
      text-decoration: none;
      text-align: right;
      cursor: pointer;
      margin-top: 0;
      margin-bottom: 7px;
      display: block;
      transition: color 0.14s;
    }
    .modal-content .forgot-link:hover {
      color: #0d47a1;
      text-decoration: underline;
    }
    #profile-dropdown {
      min-width: 170px;
      width: auto;
      position: absolute;
      right: 0;
      left: auto;
      top: 50px;
      z-index: 10;
      padding: 0;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.11);
    }
    #profile-dropdown div {
      font-size: 14px;
      font-weight: 400;
      padding-left: 20px;
      padding-bottom: 8px;
      border-radius: 15px;
      cursor: pointer;
      margin: 0;
      text-align: left;
      transition: background 0.18s, font-size 0.17s, font-weight 0.13s;
    }
    #profile-dropdown div:hover {
      background: #f0f0f0;
      font-size: 14px;
      font-weight: 700;
    }
    /* --- Overlay Profile Modal Redesigned --- */
    .profile-overlay-backdrop {
      display: none;
      position: fixed;
      z-index: 3000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(30,30,30,0.27);
      align-items: center;
      justify-content: center;
    }
    .profile-overlay-backdrop.visible {
      display: flex;
    }
    .profile-modal-card {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 2px 24px rgba(46,125,255,0.18);
      padding: 48px 32px 32px 32px;
      width: 100%;
      max-width: 400px;
      height: 500px;
      animation: fadeInUp 0.42s;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      outline: none;
      box-sizing: border-box;
    }
    .profile-modal-close-btn {
      position: absolute;
      right: 15px;
      top: 10px;
      background: #eee;
      border: none;
      border-radius: 60%;
      width: 30px;
      height: 30px;
      font-size: 18px;
      color: #444;
      cursor: pointer;
      z-index: 4;
      transition: background 0.16s;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0px;
      padding-bottom: 2px;
    }
    .profile-modal-close-btn:hover {
      background: red;
      color: white;
    }
    .profile-modal-avatar {
      margin-bottom: 28px;
      display: flex;
      justify-content: center;
    }
    .profile-modal-avatar img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 3px solid #222;
      object-fit: cover;
      background: #f1f1f1;
      box-shadow: 0 2px 16px rgba(0,0,0,0.08);
    }
    .profile-modal-fields {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
      width: 100%;
      margin-bottom: 46px;
    }
    .profile-modal-field {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    .profile-modal-label {
      color: #555;
      font-weight: 600;
      font-size: 15px;
      margin-bottom: 5px;
      text-align: center;
    }
    .profile-modal-value {
      font-size: 17px;
      color: #1a1a1a;
      word-break: break-all;
      text-align: center;
      background: #f7f7f7;
      border-radius: 8px;
      padding: 7px 16px;
      min-width: 120px;
      max-width: 100%;
      box-sizing: border-box;
      font-family: inherit;
    }
    .profile-modal-footer {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-top: 0;
      position: absolute;
      left: 0;
      bottom: 28px;
    }
    .delete-account-btn {
      margin-top: 10px;
      background: #e74c3c;
      color: #fff;
      border: none;
      padding: 14px 30px;
      border-radius: 22px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.16s;
      box-shadow: 0 2px 10px rgba(231,76,60,0.09);
      letter-spacing: 0.03em;
      white-space: nowrap;
      min-width: 180px;
    }
    .delete-account-btn:hover {
      background: black;
      color: white;
    }
    
    /* Info Message Styling */
    .info-message {
      background: #f2f7fa;
      color: #133851;
      border: 1px solid #88b4d7;
      border-radius: 12px;
      
      padding: 10px;
      font-size: 17px;
      font-family: inherit;
      max-width: 450px;
      margin-left: auto;
      margin-right: auto;
      margin-top: 40px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 2px 8px rgba(46,125,255,0.07);
    }
    .info-message svg {
      margin-right: 8px;
      flex-shrink: 0;
    }
    @media (max-width: 768px) {
  body {
      font-family: 'Inter', Arial, sans-serif;
      margin-top: 5px;
      margin-left: 0px;
      margin-right: 0px;
      text-align: center;
      background-color: #f9f9f9;
    }
    .banner {
      padding: 12px;
      font-size: 19px;
      position: relative;
    }
    .bannerimg {
      margin-top: 70px;
      margin-bottom: 0px;
      -webkit-user-drag: none;
    }
    .bannerimg img {
      width: 96vw;
      max-width: 340px;
    }
    .user-info {
      position: absolute;
      top: 6px;
      right: 8px;
      display: flex;
      align-items: center;
      gap: 7px;
      font-size: 13px;
    }
    .user-info img {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      border: 2px solid black;
      cursor: pointer;
    }
    .container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin-top: 32px;
      gap: 18px;
      width: 100vw;
    }
    .dropdown-row {
      display: flex;
      flex-direction: column;
      gap: 17px;
      justify-content: center;
      align-items: center;
      width: 100vw;
    }
    #sign-in-btn {
      color: white;
      background-color: black;
      border: none;
      border-radius: 25px;
      padding: 9px 11px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.05em;
      box-shadow: 0 2px 12px rgba(46,125,255,0.11);
      transition: background 0.2s, transform 0.13s, box-shadow 0.15s;
      margin-top: 10px;
      width: auto;
      outline: none;
    }
    #sign-in-btn:hover, #sign-in-btn:focus {
      box-shadow: 0 4px 18px rgba(46,125,255,0.17);
    }
    .dropdown {
      position: relative;
      width: 90vw;
      max-width: 320px;
    }
    .dropdown.disabled {
      opacity: 0.5;
      pointer-events: none;
    }
    .dropdown-label {
      font-weight: bold;
      margin-bottom: 7px;
      display: block;
      font-size: 15px;
    }
    .dropdown-toggle {
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 23px;
      padding: 10px;
      cursor: pointer;
      text-align: left;
      position: relative;
      font-size: 16px;
    }
    .dropdown-toggle::after {
      content: "▼";
      position: absolute;
      right: 12px;
      top: 12px;
      font-size: 12px;
    }
    .dropdown-menu {
      display: none;
      position: absolute;
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 23px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 100%;
      top: 72px;
      z-index: 1;
      max-height: 270px;
      overflow: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
      font-size: 16px;
      margin-top: 0px;
    }
    .dropdown-menu::-webkit-scrollbar {
      display: none;
    }
    .dropdown-menu div {
      padding: 10px;
      cursor: pointer;
      margin: 6px;
    }
    .dropdown-menu div:hover {
      background-color: #f0f0f0;
      margin: 6px;
      border-radius: 23px;
      font-size: 17px;
      font-weight: bold;
    }
    button {
      padding: 11px 0;
      width: 75vw;
      max-width: 140px;
      margin-top: 10px;
      border-radius: 23px;
      background-color: #4CAF50;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:disabled {
      background-color: #aaa;
      cursor: not-allowed;
    }
    /* Modal Styles (Mobile) */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.3);
    }
    .modal-content {
      background: #fff;
      margin: 40px auto;
      padding: 18px 12px 10px 12px;
      border-radius: 12px;
      width: 75vw;
      max-width: 340px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.14);
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 13px;
      position: relative;
      animation: fadeInUp 0.4s cubic-bezier(.55,1.3,.5,1) both;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(50px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .modal-content h3 {
      margin: 0 0 11px 0;
      font-size: 1.2rem;
      font-weight: 700;
      text-align: center;
      color: #23272f;
    }
    .auth-input-group {
        
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 1px;
      margin-right: 0px;
    }
    .modal-content input {
      width: 93%;
      
      background: #f8fafc;
      border: 1px solid #d0d7de;
      border-radius: 9px;
      padding: 9px 10px;
      font-size: 16px;
      transition: border-color 0.2s;
      margin-bottom: 0;
      outline: none;
      
      
    }
    .modal-content input:focus {
      border-color: #4CAF50;
      background: #f0f7f0;
    }
    .auth-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 7px;
      width: 100%;
      margin: 0 0 4px 0;
    }
    .auth-actions button {
      width: 48%;
      margin: 0;
      font-size: 14px;
      border-radius: 11px;
      padding: 9px 0;
      font-weight: 600;
      transition: background 0.17s;
    }
    .auth-actions button:last-child {
      background: red;
      color: white;
      border: 1px solid red;
      font-weight: 400;
    }
    .modal-content .auth-divider {
      margin: 8px 0 0 0;
      text-align: center;
      color: #aaa;
      font-size: 13px;
      letter-spacing: 0.06em;
    }
    .modal-content .auth-google {
      width: 100%;
      min-width: 99%;
      padding: 10px 10px;
      margin: 0 0 2px 0;
      border-radius: 11px;
      border: 1px solid #d0d7de;
      background: #fff;
      color: #23272f;
      font-size: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      cursor: pointer;
      transition: background 0.15s;
    }
    .modal-content .auth-google:hover {
      background: #f8fafc;
    }
    .modal-content .auth-google img {
      width: 20px;
      height: 20px;
      vertical-align: middle;
    }
    .modal-content .auth-link {
      font-size: 13px;
      color: #4CAF50;
      text-decoration: none;
      text-align: center;
      cursor: pointer;
      display: block;
      margin-top: 2px;
      transition: color 0.14s;
    }
    .modal-content .auth-link:hover {
      color: #2e7d32;
      text-decoration: underline;
    }
    .modal-content .auth-error {
      color: #e74c3c;
      margin: 6px 0 0 0;
      min-height: 20px;
      font-size: 14px;
      text-align: center;
    }
    .modal-content .forgot-link {
      font-size: 13px;
      color: #1976d2;
      text-decoration: none;
      text-align: right;
      cursor: pointer;
      margin-top: 0;
      margin-bottom: 7px;
      display: block;
      transition: color 0.14s;
    }
    .modal-content .forgot-link:hover {
      color: #0d47a1;
      text-decoration: underline;
    }
    #profile-dropdown {
      min-width: 140px;
      width: auto;
      position: absolute;
      right: 0;
      left: auto;
      top: 44px;
      z-index: 10;
      padding: 0;
      background: white;
      border-radius: 13px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.11);
    }
    #profile-dropdown div {
      font-size: 13px;
      font-weight: 400;
      padding-left: 17px;
      padding-bottom: 6px;
      border-radius: 11px;
      cursor: pointer;
      margin: 0;
      text-align: left;
      transition: background 0.18s, font-size 0.17s, font-weight 0.13s;
    }
    #profile-dropdown div:hover {
      background: #f0f0f0;
      font-size: 13px;
      font-weight: 700;
    }
    .profile-overlay-backdrop {
      display: none;
      position: fixed;
      z-index: 3000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(30,30,30,0.27);
      align-items: center;
      justify-content: center;
    }
    .profile-overlay-backdrop.visible {
      display: flex;
    }
    .profile-modal-card {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 24px rgba(46,125,255,0.18);
      padding: 32px 10vw 18px 10vw;
      width: 100%;
      max-width: 75vw;
      height: 410px;
      animation: fadeInUp 0.42s;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      outline: none;
      box-sizing: border-box;
    }
    .profile-modal-close-btn {
      position: absolute;
      right: 9px;
      top: 8px;
      background: #eee;
      border: none;
      border-radius: 60%;
      width: 26px;
      height: 26px;
      font-size: 18px;
      color: #444;
      cursor: pointer;
      z-index: 4;
      transition: background 0.16s;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0px;
      padding-bottom: 2px;
    }
    .profile-modal-close-btn:hover {
      background: red;
      color: white;
    }
    .profile-modal-avatar {
      margin-bottom: 18px;
      display: flex;
      justify-content: center;
    }
    .profile-modal-avatar img {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      border: 2px solid #222;
      object-fit: cover;
      background: #f1f1f1;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    }
    .profile-modal-fields {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      width: 100%;
      margin-bottom: 24px;
    }
    .profile-modal-field {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }
    .profile-modal-label {
      color: #555;
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 3px;
      text-align: center;
    }
    .profile-modal-value {
      font-size: 15px;
      color: #1a1a1a;
      word-break: break-all;
      text-align: center;
      background: #f7f7f7;
      border-radius: 7px;
      padding: 5px 8px;
      min-width: 100px;
      max-width: 100%;
      box-sizing: border-box;
      font-family: inherit;
    }
    .profile-modal-footer {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-top: 0;
      position: absolute;
      left: 0;
      bottom: 17px;
    }
    .delete-account-btn {
      margin-top: 0px;
      margin-bottom: 5px;
      background: #e74c3c;
      color: #fff;
      border: none;
      padding: 9px;
      border-radius: 17px;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.16s;
      box-shadow: 0 2px 10px rgba(231,76,60,0.09);
      letter-spacing: 0.01em;
      white-space: nowrap;
      min-width: 100px;
    }
    .delete-account-btn:hover {
      background: black;
      color: white;
    }
    .info-message {
      background: #f2f7fa;
      color: #133851;
      border: 1px solid #88b4d7;
      border-radius: 10px;
      padding: 9px 7px;
      font-size: 15px;
      font-family: inherit;
      max-width: 75vw;
      margin-left: auto;
      margin-right: auto;
      margin-top: 35px;
      display: flex;
      align-items: center;
      gap: 7px;
      box-shadow: 0 2px 8px rgba(46,125,255,0.07);
    }
    .info-message svg {
      margin-right: 6px;
      flex-shrink: 0;
    }
}
/* SERCH ICON*/
.search-expand-container {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        margin-top: 24px;
      }
      .expand-search-wrapper {
      position: relative;
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: width 0.32s cubic-bezier(.5,1.6,.6,1);
      
      
    }
      .expand-search-bar {
        width: 100%;
        height: 40px;
        border: 2px solid #4caf50;
        border-radius: 23px;
        background: transparent;
        font-size: 17px;
        outline: none;
        box-sizing: border-box;
        padding-left: 20px;
        padding-right: 20px;
        transition: background 0.18s;
        color: #222;
        caret-color: auto;
        cursor: pointer;
        position: relative;

      }
      .expand-search-bar::placeholder {
  color: #aaa;
  opacity: 1;
  transition: opacity 0.18s;
}
      .expand-search-wrapper.expanded {
        width: 400px;
        caret-color: auto;
        cursor: text;
        background: transparent;
        
      }
      .expand-search-bar.expanded::placeholder {
        opacity: 1;
      }
      .search-btn-icon-inline {
        position: absolute;
        top: -3px;
        
        transform: translateY(-50%);
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        background: none;
        padding: 0;
        cursor: pointer;
        z-index: 0;
        transition: opacity 0.2s;
      }
      .expand-search-bar.expanded + .search-btn-icon-inline {
        opacity: 0;
        pointer-events: none;
      }
      /* Autocomplete dropdown */
      .autocomplete-list {
        position: absolute;
        left: 0;
        top: 100%;
        width: 100%;
        background: whitesmoke;
        border: 1.5px solid #4caf50;
        margin-top: 3px;
        border-radius: 25px;
        max-height: 210px;
        overflow-y: auto;
        z-index: 10;
        box-shadow: 0 6px 24px rgba(46,125,80,0.11);
        font-size: 16px;
        padding: 0;
        list-style: none;
        display: none;
      }
      .autocomplete-list.visible {
        display: block;
      }
      .autocomplete-item {
        padding: 10px 16px;
        cursor: pointer;
        border-bottom: 1px solid #eee;
        background: transparent;
        transition: background 0.16s;
        font-size: 16px;
      }
      .autocomplete-item:last-child {
        border-bottom: none;
      }
      .autocomplete-item.active,
      .autocomplete-item:hover {
        background: #e8f5e9;
        font-weight: bold;
      }
      .footer{
        position: fixed;
        bottom: 0;
        width: 100%;
        padding-bottom: 4px;
        display: flex;
        justify-content: space-between;
        margin-top: 50px;
        font-size: 0.75em;
        font-weight: 500;
      }
      .right_footer img{
        margin-right: 5px;
        width: 16px;
      }
      .right_footer{
        display: flex;
        margin-right: 10px;
      }
      .left_footer
      {
        display: flex;
        margin-left: 10px;        
      }
      .left_footer img
      {
        margin-left: 5px;
        width: 18px;
        height: 18px;
      }
      @media (max-width: 600px) {
        .expand-search-wrapper,
        .expand-search-bar {
          height: 40px;
        }
        
        .expand-search-bar.expanded {
          width: 85vw;
          
          max-width: 75vw;
          margin-left: calc(-42.5vw + 45px);
          margin-right: calc(-42.5vw + 45px);
          padding-right: 20px;
        }
        .autocomplete-list {
        width: 85vw;
        max-width: 75vw;
        margin-left: 39px;
        
          
      }
        .search-btn-icon-inline {
          width: 22px;
          height: 22px;
          top:10px;
          left: 10px;       
          
        }
        .autocomplete-list {
          font-size: 15px;
        }
        .search-btn-icon-inline {
          width: 22px;
          height: 22px;
          right: 4px;
        }
        .search-btn-icon-inline svg {
          width: 18px;
          height: 18px;
        }
        .footer
        {
          padding-bottom: 15px;
          display: flex;
          flex-direction: column-reverse;
          justify-content: center;
          align-items: center;          
        }
        .right_footer{
          margin-bottom: 10px;
        }
      }
    
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore-compat.js"></script>
</head>
<body>
  <div class="banner">
    <div class="user-info" id="user-info">
      <span id="hello-user" style="display:none;">Hello, <strong id="user-name">Username</strong></span>
      <img src="https://via.placeholder.com/40" alt="Profile Picture" id="user-pic" style="display:none; cursor:pointer;">
      <button id="sign-in-btn" onclick="showAuthModal('login')">Sign In</button>
      <div id="profile-dropdown" class="dropdown-menu" style="right:0; left:auto; top:50px; min-width:170px; display:none;">
        <div onclick="goToProfile()">My Profile</div>
        <div onclick="showUserPerformance()">Performances</div>
        <div onclick="logout()">Logout</div>
      </div>
    </div>
    <div class="bannerimg"><img oncontextmenu="return false;" src="images/banner.png" alt="" draggable="false"></div>
  </div>

  

  <div class="container">
    <div class="dropdown-row">
      <!-- Subject Dropdown -->
      <div class="dropdown" id="subjectDropdown">
        <label class="dropdown-label">Select Subject</label>
        <div class="dropdown-toggle" onclick="toggleMenu('subject')">Select Subject</div>
        <div class="dropdown-menu" id="subjectMenu">
          <div onclick="selectOption('subject', 'Banking Awareness')">Banking Awareness</div>
          <div onclick="selectOption('subject', 'Child Development & Pedagogy')">Child Development & Pedagogy</div>
          <div onclick="selectOption('subject', 'Computer')">Computer</div>
          <div onclick="selectOption('subject', 'Current Affairs')">Current Affairs</div>
          <div onclick="selectOption('subject', 'Economy')">Economy</div>
          <div onclick="selectOption('subject', 'Educational Psychology')">Educational Psychology</div>
          <div onclick="selectOption('subject', 'English')">English</div>
          <div onclick="selectOption('subject', 'Environment & Ecology')">Environment & Ecology</div>
          <div onclick="selectOption('subject', 'General Awareness')">General Awareness</div>
          <div onclick="selectOption('subject', 'Geography')">Geography</div>
          <div onclick="selectOption('subject', 'Hindi')">Hindi</div>
          <div onclick="selectOption('subject', 'History')">History</div>
          <div onclick="selectOption('subject', 'Mathematics')">Mathematics</div>
          <div onclick="selectOption('subject', 'Picture-Based Learning')">Picture-Based Learning</div>
          <div onclick="selectOption('subject', 'Polity')">Polity</div>
          <div onclick="selectOption('subject', 'Punjabi')">Punjabi</div>
          <div onclick="selectOption('subject', 'Quantitative Aptitude')">Quantitative Aptitude</div>
          <div onclick="selectOption('subject', 'Reasoning Ability')">Reasoning Ability</div> 
          <div onclick="selectOption('subject', 'Science')">Science</div>        
        </div>
      </div>
      <!-- Topic Dropdown -->
      <div class="dropdown disabled" id="topicDropdown">
        <label class="dropdown-label">Select Topic</label>
        <div class="dropdown-toggle" onclick="toggleMenu('topic')">Select Topic</div>
        <div class="dropdown-menu" id="topicMenu"></div>
      </div>
      <!-- Go Button -->
      <button id="goButton" onclick="goToPage()" disabled>Go</button>
    </div>
  </div>
  <!-- SEARCH BAR-->
  <div class="search-expand-container">
      <div class="expand-search-wrapper" id="expandSearchWrapper">
        <input
          type="text"
          id="expandSearchBar"
          class="expand-search-bar"
          placeholder=""
          aria-label="Search"
          autocomplete="off"
          
        
          
        />
        <button type="button" class="search-btn-icon-inline" id="expandSearchBtn" aria-label="Expand search" tabindex="-1">
          <img src="images/search.png" width="19px" style="z-index: 0;" alt="Search Icon">
        </button>
        <ul id="autocompleteList" class="autocomplete-list"></ul>
      </div>
    </div>

  <!-- Info Message below banner and above dropdowns -->
  <div class="info-message" id="info-message">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#2e7d32" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" fill="#b7e0c1"/>
        <path fill="#2e7d32" d="M11 10h2v6h-2zm0-4h2v2h-2z"/>
    </svg>
    <span>
      To save your progress, please 
      <strong style="cursor:pointer; color:goldenrod; text-decoration: underline; text-underline-offset: 5px; " onclick="showAuthModal('login')">sign in</strong> 
      or 
      <strong style="cursor:pointer; color:goldenrod; text-decoration: underline; text-underline-offset: 5px;  " onclick="switchToSignUp()">sign up</strong>.<br>
    </span>
</div>
<!-- Add this info message for SIGNED IN state (hidden by default) -->
  <div class="info-message" id="signedin-info-message" style="display:flex;">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#2e7d32" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="10" fill="#b7e0c1"/>
      <path fill="#2e7d32" d="M11 10h2v6h-2zm0-4h2v2h-2z"/>
    </svg>
    <span>
      <strong>Great, You are signed in.</strong> Your progress will be saved automatically.
    </span>
  </div>
  <!-- Rest of your modals and scripts remain unchanged... -->
  <!-- ... [unchanged modal and script code omitted for brevity; see your original code above for rest] ... -->
  <!-- Paste your <script>...</script> block from your original code here without modification -->

  <div id="modal-login" class="modal">
    <div class="modal-content">
      <h3>Sign In</h3>
      <div class="auth-input-group">
        <input type="email" id="login-email" placeholder="Email address" autocomplete="username">
        <input type="password" id="login-password" placeholder="Password" autocomplete="current-password">
      </div>
      <a class="forgot-link" onclick="showForgotModal()">Forgot password?</a>
      <div class="auth-actions">
        <button onclick="login()">Sign In</button>
        <button onclick="hideAuthModal('login')">Cancel</button>
      </div>
      <div class="auth-divider">or</div>
      <button class="auth-google" onclick="loginGoogle()">
        <img src="images/google-logo.png" alt="Google">Sign in with Google
      </button>
      <a class="auth-link" onclick="switchToSignUp()">Don't have an account? Sign up</a>
      <div id="login-error" class="auth-error"></div>
    </div>
  </div>
  <div id="modal-signup" class="modal">
    <div class="modal-content">
      <h3>Sign Up</h3>
      <div class="auth-input-group">
        <input type="email" id="signup-email" placeholder="Email address" autocomplete="username">
        <input type="password" id="signup-password" placeholder="Password (min 6 chars)" autocomplete="new-password">
      </div>
      <div class="auth-actions">
        <button onclick="signup()">Sign Up</button>
        <button onclick="hideAuthModal('signup')">Cancel</button>
      </div>
      <div class="auth-divider">or</div>
      <button class="auth-google" onclick="signupGoogle()">
        <img src="https://www.svgrepo.com/show/475656/google-color.svg" alt="Google">Sign up with Google
      </button>
      <a class="auth-link" onclick="switchToSignIn()">Already have an account? Sign in</a>
      <div id="signup-error" class="auth-error"></div>
    </div>
  </div>
  <div id="modal-forgot" class="modal">
    <div class="modal-content">
      <h3>Reset Password</h3>
      <div class="auth-input-group">
        <input type="email" id="forgot-email" placeholder="Enter your email" autocomplete="username">
      </div>
      <div class="auth-actions">
        <button onclick="sendPasswordReset()">Send Link</button>
        <button onclick="hideAuthModal('forgot')">Cancel</button>
      </div>
      <div id="forgot-success" style="color:#388e3c; min-height:18px; text-align:center;"></div>
      <div id="forgot-error" class="auth-error"></div>
    </div>
  </div>
  <!-- Redesigned Overlay Profile Modal -->
  <div class="profile-overlay-backdrop" id="profile-overlay-backdrop">
    <div class="profile-modal-card" id="profile-modal-card" tabindex="-1">
      <button class="profile-modal-close-btn" onclick="closeProfileOverlay()" aria-label="Close">&times;</button>
      <div class="profile-modal-avatar">
        <img id="my-profile-pic" src="https://via.placeholder.com/120" alt="Profile Picture">
      </div>
      <div class="profile-modal-fields">
        <div class="profile-modal-field">
          <div class="profile-modal-label">Name</div>
          <div class="profile-modal-value" id="my-profile-name">User</div>
        </div>
        <div class="profile-modal-field">
          <div class="profile-modal-label">Email</div>
          <div class="profile-modal-value" id="my-profile-email">user@email.com</div>
        </div>
        <div class="profile-modal-field">
          <div class="profile-modal-label">Member since</div>
          <div class="profile-modal-value" id="my-profile-member-since">2024-01-01</div>
        </div>
      </div>
      <div class="profile-modal-footer">
        <button class="delete-account-btn" id="delete-account-btn" type="button">Delete Account</button>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="left_footer">Follow us: 
     <a href="https://www.facebook.com" target="_blank"><img src="images/facebook-logo.png" alt="facebook"></a> 
     <a href="https://www.x.com" target="_blank"><img src="images/x.png" alt="X"></a> 
     <a href="https://www.instagram.com" target="_blank"><img src="images/insta.png" alt="instagram"></a> 
     <a href="https://www.reddit.com" target="_blank"><img src="images/reddit.png" alt="reddit"></a> 
    </div>
   <div class="right_footer"><a href="index.html"><img src="images/logo.png" alt="Site Logo"></a> 
    Question Bank - Learn by the way of MCQ. Since 2025</div>
  </div>
  <script>
        
    // ---- FIREBASE CONFIGURATION ----
    const firebaseConfig = {
      apiKey: "AIzaSyBAS78y1CVF1lPppeyAojbw3k07mWW4lLk",
      authDomain: "questionbank-f047f.firebaseapp.com",
      projectId: "questionbank-f047f",
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // ---- DROPDOWN LOGIC ----
    const subjectTopics = {
      "Quantitative Aptitude": ['Squares upto 10','Squares upto 10 Mix','Squares upto 20','Squares upto 20 Mix', 'Squares upto 30', 'Squares upto 40','Squares upto 50','Tables upto 10','Tables upto 20','Tables upto 30','Tables upto 40','Tables upto 50'],

      "General Awareness": ['Also Known As','Books - Newspapers - Journals','Classical Dances and Dancers','Country - Capital','Country - Currency','Folk Dances','Instruments and Vocalists','National Parks and Sanctuaries','Resting Places'],

      "English": ['One Word Substitution',''],

      "Banking Awareness": ['Full Forms'],

      "Current Affairs": ['June 2025','May 2025','April 2025'],

      "Reasoning Ability": ['Alphabet Positions', 'Alphabet Positions Mix','Alphabet Series','Analogy','Classification I','Classification II','Letter Series','Number Series'],

      "Geography":['Atmosphere','Continents','Indian Geography','Landforms','Means of Transport','Rivers of India','Rocks, Earthquakes and Volcanoes','The Solar System','World Geography'],

      "History":['Pre-Historic Period','Indus Valley Civilisation','Vedic Period','Vedic Literature','Jainism','Buddhism','Ancient India Dynasties','Delhi Sultanate','Mughal Empire','Later Medieval Period','Arrival of the Europeans','Governor-Generals of Bengal','Governor-Generals of India','Viceroys of India','The Revolt of 1857','National Movements','Socio-Religious Reform Movements','Partition and Independence'],

      "Picture-Based Learning":['Countries Flags','Currency Symbols','Famous Personalities - India','Google',,'Logos - India','Logos - International','Microsoft','Monuments - India','Monuments - Worldwide','States'],

      "Child Development & Pedagogy":['Child Development & Pedagogy Mix'],
      
      "Environment & Ecology":['Overview','International Agreement/Conference']
    };

    function toggleMenu(type) {
      const menu = document.getElementById(type + 'Menu');
      const isVisible = menu.style.display === 'block';
      closeAllMenus();
      if (!isVisible) {
        menu.style.display = 'block';
      }
    }
    function selectOption(type, value) {
      document.querySelector(`#${type}Dropdown .dropdown-toggle`).textContent = value;
      document.getElementById(type + 'Menu').style.display = 'none';

      if (type === 'subject') {
        const topicDropdown = document.getElementById('topicDropdown');
        topicDropdown.classList.remove('disabled');
        // Reset topic selection
        const toggle = topicDropdown.querySelector('.dropdown-toggle');
        toggle.textContent = 'Select Topic';
        // Clear and populate topic menu
        const topicMenu = document.getElementById('topicMenu');
        topicMenu.innerHTML = '';
        (subjectTopics[value] || []).forEach(topic => {
          const div = document.createElement('div');
          div.textContent = topic;
          div.onclick = () => selectOption('topic', topic);
          topicMenu.appendChild(div);
        });
        // Disable Go button until both are selected
        document.getElementById('goButton').disabled = true;
      }

      // Enable Go button if both selected
      const selectedSubject = document.querySelector('#subjectDropdown .dropdown-toggle').textContent;
      const selectedTopic = document.querySelector('#topicDropdown .dropdown-toggle').textContent;
      if (selectedSubject !== 'Select Subject' && selectedTopic !== 'Select Topic') {
        document.getElementById('goButton').disabled = false;
      }
    }
    function goToPage() {
      const subject = document.querySelector('#subjectDropdown .dropdown-toggle').textContent;
      const topic = document.querySelector('#topicDropdown .dropdown-toggle').textContent;

      // Check if both are selected
      if(subject === "Select Subject" || topic === "Select Topic") {
        alert("Please select both subject and topic.");
        return;
      }

      // If your filenames keep spaces and cases, use this:
      // const file = `${topic}_inst.html`;

      // If your filenames are lowercased, no spaces, use this:
      const cleanTopic = topic.replace(/\s+/g, '').replace(/[^\w]/g, '');
      const file = `${cleanTopic}_inst.html`;

      // Pass subject and topic as URL parameters!
      window.location.href = `${subject}/${file.toLowerCase()}?subject=${encodeURIComponent(subject)}&topic=${encodeURIComponent(topic)}`;
    }
    function closeAllMenus() {
      document.querySelectorAll('.dropdown-menu').forEach(menu => {
        menu.style.display = 'none';
      });
    }
    window.addEventListener('click', function(event) {
      if (!event.target.closest('.dropdown')) {
        closeAllMenus();
      }
    });

    // ---- AUTH LOGIC ----
    function showAuthModal(type) {
      document.getElementById(`modal-${type}`).style.display = 'block';
      if (type === 'forgot') {
        document.getElementById('forgot-error').textContent = '';
        document.getElementById('forgot-success').textContent = '';
        document.getElementById('forgot-email').value = '';
      } else {
        document.getElementById(`${type}-error`).textContent = '';
      }
    }
    function hideAuthModal(type) {
      document.getElementById(`modal-${type}`).style.display = 'none';
      if (type === 'forgot') {
        document.getElementById('forgot-error').textContent = '';
        document.getElementById('forgot-success').textContent = '';
        document.getElementById('forgot-email').value = '';
      } else {
        document.getElementById(`${type}-error`).textContent = '';
        // Clear input fields
        if (type === 'login') {
          document.getElementById('login-email').value = '';
          document.getElementById('login-password').value = '';
        } else {
          document.getElementById('signup-email').value = '';
          document.getElementById('signup-password').value = '';
        }
      }
    }
    function switchToSignUp() {
      hideAuthModal('login');
      showAuthModal('signup');
    }
    function switchToSignIn() {
      hideAuthModal('signup');
      showAuthModal('login');
    }
    function login() {
      const email = document.getElementById('login-email').value;
      const pass = document.getElementById('login-password').value;
      auth.signInWithEmailAndPassword(email, pass)
        .then(() => {
          hideAuthModal('login');
        })
        .catch(e => {
          document.getElementById('login-error').textContent = e.message;
        });
    }
    function signup() {
      const email = document.getElementById('signup-email').value;
      const pass = document.getElementById('signup-password').value;
      auth.createUserWithEmailAndPassword(email, pass)
        .then(() => {
          hideAuthModal('signup');
        })
        .catch(e => {
          document.getElementById('signup-error').textContent = e.message;
        });
    }
    function loginGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(() => { hideAuthModal('login'); })
        .catch(e => {
          document.getElementById('login-error').textContent = e.message;
        });
    }
    function signupGoogle() {
      loginGoogle();
    }  
    function showUserPerformance(){window.location.href='performance.html';}

    // ---- Forgot Password Logic ----
    function showForgotModal() {
      hideAuthModal('login');
      showAuthModal('forgot');
      document.getElementById('forgot-email').focus();
    }
    function sendPasswordReset() {
      const email = document.getElementById('forgot-email').value.trim();
      document.getElementById('forgot-error').textContent = '';
      document.getElementById('forgot-success').textContent = '';
      if (!email) {
        document.getElementById('forgot-error').textContent = 'Please enter your email.';
        return;
      }
      auth.sendPasswordResetEmail(email)
        .then(() => {
          document.getElementById('forgot-success').textContent = 'Password reset link sent! Check your email.';
          document.getElementById('forgot-error').textContent = '';
        })
        .catch(e => {
          document.getElementById('forgot-error').textContent = e.message;
          document.getElementById('forgot-success').textContent = '';
        });
    }

    // ---- PROFILE DROPDOWN LOGIC ----
    const userPic = document.getElementById('user-pic');
    const profileDropdown = document.getElementById('profile-dropdown');
    userPic.addEventListener('click', function(event) {
      event.stopPropagation();
      profileDropdown.style.display = (profileDropdown.style.display === 'block') ? 'none' : 'block';
    });
    window.addEventListener('click', function(event) {
      if (!event.target.closest('#profile-dropdown') && event.target !== userPic) {
        profileDropdown.style.display = 'none';
      }
    });

    // Redesigned Overlay Profile Modal logic
    function goToProfile() {
      document.getElementById('profile-overlay-backdrop').classList.add('visible');
      profileDropdown.style.display = 'none';
      const user = auth.currentUser;
      if (!user) return;
      document.getElementById('my-profile-pic').src = user.photoURL || "https://api.dicebear.com/8.x/identicon/svg?seed=" + encodeURIComponent(user.uid);
      document.getElementById('my-profile-name').textContent = user.displayName || (user.email ? user.email.split('@')[0] : "User");
      document.getElementById('my-profile-email').textContent = user.email || "Not found";
      if (user.metadata && user.metadata.creationTime) {
        const dt = new Date(user.metadata.creationTime);
        document.getElementById('my-profile-member-since').textContent = dt.toLocaleDateString();
      }
      setTimeout(() => { document.getElementById('profile-modal-card').focus(); }, 120);
    }
    function closeProfileOverlay() {
      document.getElementById('profile-overlay-backdrop').classList.remove('visible');
    }
    document.addEventListener('keydown', function(evt) {
      if(evt.key === "Escape") closeProfileOverlay();
    });
    document.getElementById('profile-overlay-backdrop').addEventListener('mousedown', function(e) {
      if (e.target === this) closeProfileOverlay();
    });

    // Delete account logic
    async function deleteAccount() {
      if (!confirm("⚠️ Are you sure you want to delete your account? This cannot be undone.")) return;
      const user = firebase.auth().currentUser;
      if (!user) {
        alert("No user is currently signed in.");
        return;
      }

      const db = firebase.firestore();

      // Delete user data from Firestore (including nested collections)
      async function deleteUserData(uid) {
        try {
          // Delete subcollections (like "results")
          const collections = await db.collection("users").doc(uid).listCollections();
          for (const collection of collections) {
            const docs = await collection.get();
            const batch = db.batch();
            docs.forEach(doc => batch.delete(doc.ref));
            await batch.commit();
          }
          // Delete main user doc
          await db.collection("users").doc(uid).delete();
        } catch (err) {
          // Ignore Firestore errors, since user may not have data
        }
      }

      try {
        await deleteUserData(user.uid);
      } catch (err) {
        // Optionally handle error
      }

      // Delete Firebase Auth user
      user.delete().then(()=>{
        alert("✅ Account and all your data deleted.");
        closeProfileOverlay();
      }).catch(e=>{
        if (e.code === 'auth/requires-recent-login') {
          alert("↻ Please re-login before deleting your account for security.");
        } else {
          alert("Error deleting account: " + e.message);
        }
      });
    }

    // Attach the click handler
    document.getElementById('delete-account-btn').onclick = deleteAccount;
    function logout() {
      auth.signOut()
        .then(() => {})
        .catch(e => {
          alert("Error signing out: " + e.message);
        });
      profileDropdown.style.display = 'none';
      closeProfileOverlay();
    }

    // ---- AUTH STATE LISTENER ----
    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById('hello-user').style.display = '';
        document.getElementById('user-name').textContent = user.displayName || (user.email ? user.email.split('@')[0] : 'User');
        document.getElementById('user-pic').style.display = '';
        document.getElementById('sign-in-btn').style.display = 'none';
        document.getElementById('user-pic').src = user.photoURL || "https://api.dicebear.com/8.x/identicon/svg?seed=" + encodeURIComponent(user.uid);
        // HIDE info-message if signed in
        document.getElementById('info-message').style.display = 'none';
        document.getElementById('signedin-info-message').style.display = 'flex';
        // Hide the signed-in message after a delay (optional)
        setTimeout(() => {
          if (auth.currentUser) document.getElementById('signedin-info-message').style.display = 'none';
        }, 6000); // 3.5 seconds
      } else {
        document.getElementById('hello-user').style.display = 'none';
        document.getElementById('user-pic').style.display = 'none';
        document.getElementById('sign-in-btn').style.display = '';
        closeProfileOverlay();
        profileDropdown.style.display = 'none';
        // SHOW info-message if not signed in
        document.getElementById('info-message').style.display = 'flex';
        document.getElementById('signedin-info-message').style.display = 'none';
      }
    });

    // Close modal on outside click
    window.onclick = function(event) {
      ['modal-login','modal-signup','modal-profile-pic','modal-forgot'].forEach(id=>{
        const modal = document.getElementById(id);
        if (modal && event.target == modal) modal.style.display = "none";
      });
    }

  //Search Icon script  
   // --- Expandable Search Bar, no icon when expanded ---
      // Load topics JSON
      let topics = [];
      fetch('topics.json')
        .then(r => r.json())
        .then(json => topics = json);

      const expandBtn = document.getElementById('expandSearchBtn');
      const expandBar = document.getElementById('expandSearchBar');
      const autocompleteList = document.getElementById('autocompleteList');
      const searchWrapper = document.getElementById('expandSearchWrapper');
      let expanded = false;
      let filtered = [];
      let activeIndex = -1;

  function expandSearch() {
  searchWrapper.classList.add('expanded');
  expandBar.classList.add('expanded');
  expandBar.readOnly = false;
  expandBar.placeholder = "Type to search topics...";
  expandBar.focus();
  expanded = true;
  document.getElementById('info-message').style.display = "none"
}
function collapseSearch() {
  searchWrapper.classList.remove('expanded');
  expandBar.classList.remove('expanded');
  expandBar.value = '';
  expandBar.placeholder = "";
  expandBar.readOnly = true;
  expanded = false;
  autocompleteList.classList.remove('visible');
  autocompleteList.innerHTML = "";
  activeIndex = -1;
  auth.onAuthStateChanged(user => {
      if (user) 
        
        document.getElementById('info-message').style.display = 'none';
        else 
        document.getElementById('info-message').style.display = 'flex';
               
      });
  
}

    expandBtn.addEventListener('click', function(e) {
        if (!expanded) 
    expandSearch();    
      });
      expandBar.addEventListener('focus', function() {
        if (!expanded) expandSearch();
      });
      expandBar.addEventListener('blur', function() {
        setTimeout(() => {
          collapseSearch();
        }, 160);
      });

      // Fuzzy match: all words in any order
      function matchTopics(query) {
      if (!query.trim()) return [];
      const words = query.trim().toLowerCase().split(/\s+/);

      return topics.filter(item => {
        const hayList = [item.name, ...(item.alias || [])]; // combine name and alias list
        return hayList.some(hayItem => {
          const hay = hayItem.toLowerCase();
          return words.every(word => hay.includes(word));
        });
      });
    }


      expandBar.addEventListener('input', function(e) {
        const val = expandBar.value;
        filtered = matchTopics(val);
        autocompleteList.innerHTML = "";
        activeIndex = -1;
        if (filtered.length > 0 && val.trim()) {
          filtered.forEach((item, idx) => {
            const li = document.createElement('li');
            li.className = "autocomplete-item";
            li.textContent = item.name;
            li.onclick = () => {
              window.location.href = item.url;
            };
            autocompleteList.appendChild(li);
          });
          autocompleteList.classList.add('visible');
        } else {
          autocompleteList.classList.remove('visible');
        }
      });

      // Keyboard navigation
      expandBar.addEventListener('keydown', function(e) {
        const items = autocompleteList.querySelectorAll('.autocomplete-item');
        if (!autocompleteList.classList.contains('visible')) return;
        if (e.key === "ArrowDown") {
          activeIndex = (activeIndex + 1) % items.length;
          updateActive();
          e.preventDefault();
        } else if (e.key === "ArrowUp") {
          activeIndex = (activeIndex - 1 + items.length) % items.length;
          updateActive();
          e.preventDefault();
        } else if (e.key === "Enter") {
          if (activeIndex >= 0 && filtered[activeIndex]) {
            window.location.href = filtered[activeIndex].url;
          }
        }
      });

      function updateActive() {
        const items = autocompleteList.querySelectorAll('.autocomplete-item');
        items.forEach((el, idx) => {
          if (idx === activeIndex) el.classList.add('active');
          else el.classList.remove('active');
        });
      }

      // Optional shortcut: expand search with "/" key
      document.addEventListener('keydown', function(e) {
        if ((e.key === "/" || e.key === "s") && !expanded && document.activeElement.tagName !== "INPUT" && document.activeElement.tagName !== "TEXTAREA") {
          expandSearch();
          e.preventDefault();
        }
      });
  </script>
</body>
</html>